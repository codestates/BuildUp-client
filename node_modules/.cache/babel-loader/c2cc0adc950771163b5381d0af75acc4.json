{"ast":null,"code":"var _jsxFileName = \"/home/studio/Desktop/Team_Project/BuildUp-client/src/components/carousels/MonthCalendar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { js_date } from \"../../utilities/index\";\nimport \"../css/temporary-CSS-for-Carousel.css\";\nimport \"../css/temporary-CSS-monthTodoContainer.css\";\nimport { setDateSelector, toggleModal, setModalType } from \"../../actions/index\";\nimport { startOfMonth, endOfMonth, startOfWeek, endOfWeek, format, isSameMonth, addDays } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Calendar() {\n  _s();\n\n  // TODO 아래 변수를 조정하여 화면에 노출되는 최대 TODO 갯수를 조정할 수 있습니다.\n  const MAX_ELEMENTS_COUNT = 3;\n  const dispatch = useDispatch();\n  const [time, setTime] = useState(new Date());\n  const [month, setMonth] = useState(js_date.getMonth(time)); // !TODO: Force update하도록 해주는 함수\n  // const [, updateState] = React.useState();\n  // const forceUpdate = React.useCallback(() => updateState({}), []);\n\n  const dateSelectorState = useSelector(state => state.dateSelectorReducer);\n  const todoItemsState = useSelector(state => state.toDoItemsReducer);\n  const {\n    dateSelector\n  } = dateSelectorState;\n  const todoItems = todoItemsState.todoItems;\n  const modalState = useSelector(state => state.modalStateReducer);\n  const modalTypeState = useSelector(state => state.modalTypeReducer);\n  const isModalOpen = modalState.modalStatus;\n  const {\n    modalType\n  } = modalTypeState;\n\n  const isSelectedDay = date => {\n    date = date.split(\"-\");\n    const [year, month, day] = date;\n    if (Number(year) === dateSelector.year && Number(month) === dateSelector.month && Number(day) === dateSelector.day) return true;\n    return false;\n  };\n\n  const handleDateSelector = e => {\n    // if (!e.target.dataset.date) return;\n    if (!isModalOpen) dispatch(toggleModal());\n    if (modalType !== \"TODOMANAGER\") dispatch(setModalType(\"TODOMANAGER\"));\n    const date = e.target.dataset.date.split(\"-\");\n    const [year, month, day] = date;\n    dispatch(setDateSelector(year, month, day));\n  };\n\n  const renderTodo = date => {\n    const count = {};\n    const tempStore = Object.assign([], todoItems);\n    tempStore.sort((a, b) => a.order - b.order);\n    const sorted = tempStore.filter(el => {\n      if (el.date === date) {\n        if (count[el.date] >= MAX_ELEMENTS_COUNT) return false;\n        if (!count[el.date]) count[el.date] = 1;else count[el.date]++;\n        return true;\n      }\n\n      return false;\n    });\n    return sorted.map((el, idx) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: [\"disable-select\", \"month-todo-item\", el.checked ? \"checked\" : \"\"].join(\" \"),\n        \"data-date\": date,\n        onClick: handleDateSelector,\n        children: el.content\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this);\n    });\n  };\n\n  const renderCells = () => {\n    const monthStart = startOfMonth(time);\n    const monthEnd = endOfMonth(monthStart);\n    const startDate = startOfWeek(monthStart);\n    const endDate = endOfWeek(monthEnd);\n    const rows = [];\n    let days = [];\n    let day = startDate;\n    let formattedDate = \"\";\n    let propsDate = \"\";\n\n    while (day <= endDate) {\n      for (let i = 0; i < 7; i++) {\n        formattedDate = format(day, \"d\");\n        propsDate = format(day, \"yyyy-MM-dd\");\n        days.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: handleDateSelector,\n          \"data-date\": propsDate,\n          className: [\"col\", \"cell\", !isSameMonth(day, monthStart) ? \"disabled\" : isSelectedDay(propsDate) ? \"selected\" : \"\"].join(\" \"),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: [\"number\", \"disable-select\"].join(\" \"),\n            \"data-date\": propsDate,\n            onClick: handleDateSelector,\n            children: formattedDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), renderTodo(propsDate)]\n        }, day, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this));\n        day = addDays(day, 1);\n      }\n\n      rows.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: days\n      }, day, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this));\n      days = [];\n    }\n\n    return rows;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"month-todo-container\",\n    children: renderCells()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 10\n  }, this);\n}\n\n_s(Calendar, \"0tvOobVjZfQ+mrHbyf/CPbykJaI=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Calendar;\nexport default Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"sources":["/home/studio/Desktop/Team_Project/BuildUp-client/src/components/carousels/MonthCalendar.js"],"names":["React","useState","useDispatch","useSelector","js_date","setDateSelector","toggleModal","setModalType","startOfMonth","endOfMonth","startOfWeek","endOfWeek","format","isSameMonth","addDays","Calendar","MAX_ELEMENTS_COUNT","dispatch","time","setTime","Date","month","setMonth","getMonth","dateSelectorState","state","dateSelectorReducer","todoItemsState","toDoItemsReducer","dateSelector","todoItems","modalState","modalStateReducer","modalTypeState","modalTypeReducer","isModalOpen","modalStatus","modalType","isSelectedDay","date","split","year","day","Number","handleDateSelector","e","target","dataset","renderTodo","count","tempStore","Object","assign","sort","a","b","order","sorted","filter","el","map","idx","checked","join","content","renderCells","monthStart","monthEnd","startDate","endDate","rows","days","formattedDate","propsDate","i","push"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { js_date } from \"../../utilities/index\";\nimport \"../css/temporary-CSS-for-Carousel.css\";\nimport \"../css/temporary-CSS-monthTodoContainer.css\";\nimport {\n  setDateSelector,\n  toggleModal,\n  setModalType,\n} from \"../../actions/index\";\n\nimport {\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  format,\n  isSameMonth,\n  addDays,\n} from \"date-fns\";\n\nfunction Calendar() {\n  // TODO 아래 변수를 조정하여 화면에 노출되는 최대 TODO 갯수를 조정할 수 있습니다.\n  const MAX_ELEMENTS_COUNT = 3;\n\n  const dispatch = useDispatch();\n  const [time, setTime] = useState(new Date());\n  const [month, setMonth] = useState(js_date.getMonth(time));\n  // !TODO: Force update하도록 해주는 함수\n  // const [, updateState] = React.useState();\n  // const forceUpdate = React.useCallback(() => updateState({}), []);\n\n  const dateSelectorState = useSelector((state) => state.dateSelectorReducer);\n  const todoItemsState = useSelector((state) => state.toDoItemsReducer);\n  const { dateSelector } = dateSelectorState;\n  const todoItems = todoItemsState.todoItems;\n\n  const modalState = useSelector((state) => state.modalStateReducer);\n  const modalTypeState = useSelector((state) => state.modalTypeReducer);\n  const isModalOpen = modalState.modalStatus;\n  const { modalType } = modalTypeState;\n\n  const isSelectedDay = (date) => {\n    date = date.split(\"-\");\n    const [year, month, day] = date;\n\n    if (\n      Number(year) === dateSelector.year &&\n      Number(month) === dateSelector.month &&\n      Number(day) === dateSelector.day\n    )\n      return true;\n    return false;\n  };\n\n  const handleDateSelector = (e) => {\n    // if (!e.target.dataset.date) return;\n    if (!isModalOpen) dispatch(toggleModal());\n    if (modalType !== \"TODOMANAGER\") dispatch(setModalType(\"TODOMANAGER\"));\n\n    const date = e.target.dataset.date.split(\"-\");\n    const [year, month, day] = date;\n\n    dispatch(setDateSelector(year, month, day));\n  };\n\n  const renderTodo = (date) => {\n    const count = {};\n\n    const tempStore = Object.assign([], todoItems);\n    tempStore.sort((a, b) => a.order - b.order);\n\n    const sorted = tempStore.filter((el) => {\n      if (el.date === date) {\n        if (count[el.date] >= MAX_ELEMENTS_COUNT) return false;\n        if (!count[el.date]) count[el.date] = 1;\n        else count[el.date]++;\n        return true;\n      }\n      return false;\n    });\n\n    return sorted.map((el, idx) => {\n      return (\n        <li\n          className={[\n            \"disable-select\",\n            \"month-todo-item\",\n            el.checked ? \"checked\" : \"\",\n          ].join(\" \")}\n          data-date={date}\n          onClick={handleDateSelector}\n          key={idx}\n        >\n          {el.content}\n        </li>\n      );\n    });\n  };\n\n  const renderCells = () => {\n    const monthStart = startOfMonth(time);\n    const monthEnd = endOfMonth(monthStart);\n    const startDate = startOfWeek(monthStart);\n    const endDate = endOfWeek(monthEnd);\n\n    const rows = [];\n    let days = [];\n    let day = startDate;\n    let formattedDate = \"\";\n    let propsDate = \"\";\n\n    while (day <= endDate) {\n      for (let i = 0; i < 7; i++) {\n        formattedDate = format(day, \"d\");\n        propsDate = format(day, \"yyyy-MM-dd\");\n        days.push(\n          <div\n            onClick={handleDateSelector}\n            data-date={propsDate}\n            className={[\n              \"col\",\n              \"cell\",\n              !isSameMonth(day, monthStart)\n                ? \"disabled\"\n                : isSelectedDay(propsDate)\n                ? \"selected\"\n                : \"\",\n            ].join(\" \")}\n            key={day}\n          >\n            <span\n              className={[\"number\", \"disable-select\"].join(\" \")}\n              data-date={propsDate}\n              onClick={handleDateSelector}\n            >\n              {formattedDate}\n            </span>\n            {renderTodo(propsDate)}\n          </div>,\n        );\n        day = addDays(day, 1);\n      }\n      rows.push(\n        <div className=\"row\" key={day}>\n          {days}\n        </div>,\n      );\n      days = [];\n    }\n    return rows;\n  };\n\n  return <div id=\"month-todo-container\">{renderCells()}</div>;\n}\n\nexport default Calendar;\n"]},"metadata":{},"sourceType":"module"}